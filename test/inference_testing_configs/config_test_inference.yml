## This config file will not generate a makefile as currently configured.
## We want to show all of the options available, even though some are not appropriately general for this scope
## In particular, importation and the associated FolderDraw seeding method only work for sets of US states.
## The comments in this file explain how to modify it based on your use case
## Items that must be changed for the process to work are designated by < >.
## Some items in the config can be removed, and we have tried to note these with comments as well.

name: testInference
start_date: 2020-01-01
end_date: 2020-12-31
dt: 0.25
test_dir: model_output

seir:
  parameters:
    sigma: 1 / 5.2
    gamma:
      distribution: fixed
      value: 1 / 4
    R0s:
      distribution: fixed
      value: 2.5

spatial_setup:
  setup_name: testInference
  nodenames: geoid
  base_path: COVIDScenarioPipeline/data/testInference
  geodata: geodata.csv
  mobility: mobility.csv
  popnodes: pop
  
seeding: ## If removing the importation, comment out this seeding block
  method: FolderDraw
  seeding_file_type: seed
  folder_path: COVIDScenarioPipeline/notebooks/
  lambda_file: data/seeding.csv
  perturbation_sd: 1
  
interventions:
  scenarios:
    - test
  settings:
    local_variation:
      template: ReduceR0
      value:
        distribution: truncnorm
        mean: 0
        sd: .1
        a: -1
        b: 1
      perturbation:
        distribution: truncnorm
        mean: 0
        sd: 0.1
        a: -.1
        b: .1
    npi:
      template: ReduceR0
      period_start_date: 2020-03-25
      value:
        distribution: truncnorm
        mean: 0.7
        sd: .1
        a: 0
        b: 1
      perturbation:
        distribution: truncnorm
        mean: 0
        sd: 0.1
        a: -.1
        b: .1
    test:
      template: Stacked
      scenarios: ["local_variation","npi"]

outcomes:
  method: delayframe
  param_from_file: TRUE
  param_place_file: data/hospitalization_testInference.hpar.parquet
  scenarios: med
  settings:
    med:
      incidH:
        source: incidI
        probability:
          value:
            distribution: fixed
            value: 0.035
        delay:
          value:
            distribution: fixed
            value: 7
        duration:
          value:
            distribution: fixed
            value: 7
          name: hosp_curr
      incidD:
        source: incidI
        probability:
          value:
            distribution: fixed
            value: 0.01
        delay:
          value:
            distribution: fixed
            value: 20
      incidICU:
        source: incidH
        probability:
          value:
            distribution: fixed
            value: 0.167
        delay:
          value:
            distribution: fixed
            value: 3
        duration:
          value:
            distribution: fixed
            value: 8
      incidVent:
        source: incidICU
        probability:
          value:
            distribution: fixed
            value: 0.463
        delay:
          value:
            distribution: fixed
            value: 1
        duration:
          value:
            distribution: fixed
            value: 7
      incidC:
        source: incidI
        probability:
          value:
            distribution: fixed
            value: 0.2
        delay:
          value:
            distribution: fixed
            value: 7

filtering:
  simulations_per_slot: 250 
  do_filtering: TRUE
  data_path: data/test_data.csv
  likelihood_directory: importation/likelihood/
  statistics:
    sum_deaths:
      name: sum_deaths
      aggregator: sum
      period: "1 weeks"
      sim_var: incidD
      data_var: incidD
      remove_na: TRUE
      add_one: TRUE
      likelihood:
        dist: sqrtnorm
        param: [.1]
    sum_cases:
      name: sum_cases
      aggregator: sum
      period: "1 weeks"
      sim_var: incidC
      data_var: incidC
      remove_na: TRUE
      add_one: TRUE
      likelihood:
        dist: sqrtnorm
        param: [.2]
    sum_infections:
      name: sum_infections
      aggregator: sum
      period: "1 weeks"
      sim_var: incidI
      data_var: incidI
      remove_na: TRUE
      add_one: TRUE
      likelihood:
        dist: sqrtnorm
        param: [.1]

